<!--
 * @Author: JohnJeep
 * @Date: 2019-01-04 10:57:29
 * @LastEditTime: 2025-04-04 19:24:07
 * @Description: 命名规范笔记
--> 

# 1. 编程规范笔记



## 1.1. 不同操作系统

- Linux一般采用小写和 `_ ` 组合；
- Windows一般采用大小写组合的方式


## 1.2. 四大命名规范
- 匈牙利法
  - 开头字母用变量类型的缩写，其余部分用变量的英文或英文的缩写，要求单词第一个字母大写。
  - `int iMyAge;` “i”是int类型的缩写； 
  - `char cMyName[10];` “c”是char类型的缩写；
- 驼峰式法
  - 第一个单词首字母小写，后面其他单词首字母大写。
  - `int myAge;` 
  - `char myName[10]; `
- 帕斯卡法
  - 每个单词的第一个字母都大写
  - `int MyAge;`
  - `char MyName[10];`
- 下划线法
  - 采用下划线命名方法，小写加下划线，在pyhton中使用比较多


## 1.3. 个人风格命名规范
遵循原则：易于阅读，优美，简洁。


### 1.3.1. 代码格式
- `if/for/while/switch/do` 等保留字与括号之间都必须加 `空格`，函数或者方法名称与括号之间不用加空格。


- 任何二目、 三目运算符的左右两边都需要加一个 `空格`。
  
> 说明： 包括赋值运算符=、逻辑运算符&&、加减乘除符号等。
  
- 注释的双斜线与注释内容之间有且仅有一个空格。

- 在进行类型强制转换时，右括号与强制转换值之间不需要任何空格隔开。
   ```
   long first = 1000000000000L;
   int second = (int)first + 2;
   ```

- 单行字符数限制不超过 `80` 个，超出需要换行。逗号处执行换行，不要在括号前换行。

- IDE 的 `text file encoding` 设置为 `UTF-8`; IDE 中文件的换行符使用 Unix 格式，不要使用 Windows 格式。

- 没有必要增加若干空格来使变量的赋值等号与上一行对应位置的等号对齐

- 不同逻辑、不同语义、不同业务的代码之间插入一个空行分隔开来以提升可读性。
  
> 说明： 任何情形， 没有必要插入多个空行进行隔开。
  
- 指针符号 `*`，引用符号`&` 的位置，写在靠近类型的地方。


### 1.3.2. 文件名
- 一般为名词性的词。
- 全部小写，多个单词之间使用破折号 `-` 隔开，不采用下划线 `_`。
- 同一级下有多个文件，属于同一内容时，文件开头添加数字`00 01 ...`等，以便区分。


### 1.3.3. 变量名
- 普通变量名，个人习惯单词与单词之间采用下划线 `_` 的方式。若公司有编码规范，需遵守公司的编码规范（例如：全部采用小写式的驼峰法命名）。

- 在 `long` 或者 `Long` 赋值时， 数值后使用大写的 `L`，不能是小写的 `l`，小写容易跟数字混淆，造成误解。

- 常量命名
  - 全部大写，单词间用下划线隔开，力求语义表达完整清楚，不要嫌名字长。一般为名词性的变量。
  - C语言中常用宏定义。表示 `类型的名词` 放在词尾，以提升辨识度。

- `bool` 类型添加上 `is`。`isEmpty, isOK, isDoorOpened`等等，读起来就是一个询问句。

- 类成员变量
  - 成员变量，访问权限只分成两级，private 和 public，不要用 protected。 私有的成员变量，前面加下划线。
  - 公有的成员变量前面不用加下划线。

- 静态成员变量：统一加 `s_` 前缀，并尽可能的详细命名。例如：`static ColorTransformStack s_colorTransformStack;`

- 全局变量：加上前缀 `g_`，并尽可能的详细命名

- 嵌入式中，包含有外围设备的变量每个字母大写，后面加`_`，下划线后面每个单词的首字母大写。




### 1.3.4. 结构体和枚举类型
- 结构体和枚举类型，词性一般为名词或者形容词。
- 枚举类名
  - 结尾带上 `Enum` 后缀，`枚举成员`名称需要`全大写`，单词间用下划线隔开。
  - 枚举其实就是特殊的常量类，且构造方法被默认强制是私有。
  - 例子：枚举名字为 `ProcessStatusEnum` 的成员名称： `SUCCESS / UNKNOWN_REASON`


- 嵌入式单片机中，包含有外围设备的变量每个字母大写，后面加`_`，下划线后面每个单词的首字母大写，结构体结尾添加 `_TypeDef`，枚举结尾添加 `_Type`。 例如：` CAN_TxMailBox_TypeDef`  ` IRQn_Type`  


### 1.3.5. 方法名（函数名）
- 整体上，应该是个动词或者是形容词(返回bool的函数)，但不要是名词。
- 名称尽量短并且保持原子性。
- C++、C中首字母小写，其它的单词首字母大写，没有下划线。
- 统一使用 `lowerCamelCase` 风格。
  
  > 例如：`localValue / getHttpMessage() / inputUserId`
- 嵌入式单片机中，包含有外围设备的变量每个字母大写，后面加 `_`，下划线后面每个单词的首字母大写。例如：`ADC_GetResetCalibrationStatus()`


### 1.3.6. 类名（class） 
- 类型命名每个单词以大写字母开头，不包含下划线 `MyExcitingClass、 MyExcitingEnum`
- 如果模块、 接口、类、方法使用了设计模式，在命名时需体现出具体模式。
  
  > 说明： 将设计模式体现在名字中，有利于阅读者快速理解架构设计理念


### 1.3.7. 抽象类、异常、测试名
- 抽象类命名使用 `Abstract` 或 `Base` 开头；
- 异常类命名使用 `Exception` 结尾； 
- 测试类命名以它要测试的类的名称开始，以 `Test` 结尾。


### 1.3.8. 包名
- 统一使用小写，点分隔符之间有且仅有一个自然语义的英语单词。
- 包名统一使用单数形式，但是类名如果有复数含义，类名可以使用复数形式。
- 应用工具类包名为 `com.alibaba.ei.kunlun.aap.util`、类名为 `MessageUtils`（此规则参考 spring 的框架结构）  


### 1.3.9. Include与Define
- #define
  - 所有的头文件，都应该使用 `#define` 来防止头文件被重复包含。
  - #define宏，的名字全部都为大写。不要出现大小写混杂的形式。
    ```c++
    // 格式
    #ifndef __GEO_POINT_H__
    #define __GEO_POINT_H__
    namespace geo
    {
      class Point
      {
          .....
      };
    }
    #endif
    ```

- #include
  
  - C++代码使用 `#include` 来引入其它的模块的头文件。尽可能，按照模块的稳定性顺序来排列#include的顺序，按照稳定性从高到低排列。


## 1.4. OOP规约(Object Oriented Programming) 
- 任何货币金额，均以最小货币单位且 **整型类型** 来进行存储
- 浮点数之间的等值判断，基本数据类型不能用 `==`来比较，计算机在内部进行差值计算的时候，因为精度的问题，导致判断的两个结果可能不相等。


## 1.5. 时间约定
- 年份统一使用小写的 y
- 月份是大写的 M
- 分钟则是小写的 m
- 24 小时制的是大写的 H
- 12 小时制的则是小写的 h
- 不要在程序中写死一年为 `365` 天，避免在公历闰年时出现日期转换错误或程序逻辑
错误。
- 使用枚举值来指代月份。


## 1.6. 控制语句
- 在一个 switch 块内，每个 case 要么通过 continue/break/return 等来终止，要么
注释说明程序将继续执行到哪一个 case 为止；在一个 switch 块内，都必须包含一个 default语句并且放在最后，即使它什么代码也没有。
  
  > 说明： 注意 break 是退出 switch 语句块，而 return 是退出方法体
- 在 if/else/for/while/do 语句中必须使用大括号。
  
  > 说明： 即使只有一行代码， 禁止不采用大括号的编码方式： `if (condition) statements;`
- 表达异常的分支时， 少用 if-else 方式， 这种方式可以改写成：
  ```
  if (condition) {
  ...
  return obj;
  }
  // 接着写 else 的业务逻辑代码;

  说明： 如果非使用 if()...else if()...else...方式表达逻辑， 避免后续代码维护困难， 请勿超过 3 层。
  ```
- 不要在其它表达式（尤其是条件表达式）中，插入赋值语句。
  
  > 说明： 赋值点类似于人体的穴位，对于代码的理解至关重要，所以赋值语句需要清晰地单独成为一行
- 避免采用取反逻辑运算符。
  
  > 说明： 取反逻辑不利于快速理解，并且取反逻辑写法必然存在对应的正向逻辑写法。


## 1.7. 注释规约
- 所有的类都必须添加创建者和创建日期。日期的设置统一为 yyyy/MM/dd 的格式。
  ```
  /**
    * @author yangguanbao
    * @date 2016/10/31
    */
  ```
- 方法内部单行注释，在被注释语句上方另起一行，使用//注释。方法内部多行注释使
用/* */注释，注意与代码对齐
- 所有的枚举类型字段必须要有注释，说明每个数据项的用途。
- 与其“半吊子” 英文来注释，不如用中文注释把问题说清楚。专有名词与关键字保持
英文原文即可。
- 代码修改的同时，注释也要进行相应的修改，尤其是参数、返回值、异常、核心逻辑
等的修改。
  
  > 说明： 代码与注释更新不同步，就像路网与导航软件更新不同步一样，如果导航软件严重滞后，就失去了导航的意义。
- 对于注释的要求：
  - 第一、能够准确反映设计思想和代码逻辑
  - 第二、能够描述业务含义，使别的程序员能够迅速了解到代码背后的信息。完全没有注释的大段代码对于阅读者形同天书，注释是给自己看的，即使隔很长时间，也能清晰理解当时的思路； 注释也是给继任者看的，使其能够快速接替自己的工作。
- 对于暂时被注释掉，后续可能恢复使用的代码片断，在注释代码上方，统一规定使用三个斜杠(///)
  ```
  public static void hello() {
  /// 业务方通知活动暂停
  // Business business = new Business();
  // business.active();
  System.out.println("it's finished");
  }
  ```

## 1.8. 单元测试
- A： Automatic（自动化）
- I： Independent（独立性）
- R： Repeatable（可重复）



## 1.9. Code Review
对于代码格式规范，100% 严格执行，严重容不得一点沙。

- 文件绝不能超过 800 行，超过，一定要思考怎么拆文件。工程思维，就在于拆文件的时候积累。


- 函数对决不能超过 80 行，超过，一定要思考怎么拆函数，思考函数分组，层次。工程思维，就在于拆文件的时候积累。


- 代码嵌套层次不能超过 4 层，超过了就得改。多想想能不能 early return。工程思维，就在于拆文件的时候积累。


- 
  从目录、package、文件、struct、function 一层层下来 ，信息一定不能出现冗余。比如 file.FileProperty 这种定义。只有每个定语只出现在一个位置，才为做好逻辑、定义分组/分层提供了可能性。


- 多用多级目录来组织代码所承载的信息，即使某一些中间目录只有一个子目录。
- 随着代码的扩展，老的代码违反了一些设计原则，应该立即原地局部重构，维持住代码质量不滑坡。比如:拆文件；拆函数；用 Session 来保存一个复杂的流程型函数的所有信息；重新调整目录结构。

- 基于上一点考虑，我们应该尽量让项目的代码有一定的组织、层次关系。我个人的当前实践是除了特别通用的代码，都放在一个 git 里。特别通用、修改少的代码，逐渐独立出 git，作为**子 git** 连接到当前项目 git，让 goland 的 Refactor 特性、各种 Refactor 工具能帮助我们快速、安全局部重构。


- 自己的项目代码，应该有一个内生的层级和逻辑关系。flat 平铺展开是非常不利于代码复用的。怎么复用、怎么组织复用，肯定会变成人生难题。T4-T7 的同学根本无力解决这种难题。

- 如果被 review 的代码虽然简短，但是你看了一眼却发现不咋懂，那就一定有问题。自己看不出来，就找高级别的同学交流。这是你和别 review 代码的同学成长的时刻。

- 日志要少打。要打日志就要把关键索引信息带上。必要的日志必须打。

- 有疑问就立即问，不要怕问错。让代码作者给出解释。不要怕问出极低问题。

- 不要说建议，提问题，就是刚，你 pk 不过我，就得改！

- 请积极使用 trpc。总是要和老板站在一起！只有和老板达成的对于代码质量建设的共识，才能在团队里更好地做好代码质量建设。

- **消灭重复！消灭重复！消灭重复！**


## 1.10. 代码写的优美的特征
1. 命名规范，风格统一。**给变量取名称时，为什么人家（Google的工程师）就能想到那么多、那么优雅、恰到好处的名字？**
2. 行间距恰到好处。
3. 整体布局合理，让人一看感觉就很舒适。看代码就像看诗歌一样，甚至比诗歌还要优美。
4. 合理的注释。


## 1.11. References
- [CSDN：Google的C++编程规范总结](https://blog.csdn.net/orange_littlegirl/article/details/94153948)
- [Google Style Guides](https://google.github.io/styleguide/)：Google 所有编程语言编程规范文档。