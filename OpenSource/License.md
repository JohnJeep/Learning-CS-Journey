<!--
 * @Author: JohnJeep
 * @Date: 2024-12-01 00:40:42
 * @LastEditors: JohnJeep
 * @LastEditTime: 2026-02-13 10:29:50
 * @Description:  开源许可证
 * Copyright (c) 2025 by John Jeep, All Rights Reserved. 
-->

# License 开源许可证

开源协议是软件项目向外界开放源代码时的重要法律工具，决定了他人使用、修改、分发代码的权利与义务。
GPL、LGPL、MIT 和 Apache 是四种最常见的开源协议，它们的核心差异在于强制程度（传染性）、专利授权以及商业友好性。
下面分别介绍各协议特点，并通过对比说明主要区别，最后给出选用时的注意事项。

# 协议

选用协议时，除了技术层面，还应考虑法律环境（尤其是专利）、社区习惯（如前端圈多用 MIT）以及未来是否可能被其他项目集成。
若不确定，可从 MIT 或 Apache 2.0 起步，它们足够宽松，日后变更协议（征得全部贡献者同意）也相对容易。

## MIT

MIT License 许可证是一种非常宽松的开源协议，允许用户几乎无限制地使用、复制、修改、合并、发布、分发、再授权和销售软件。
唯一的要求是必须在软件和相关文档中包含原始版权声明和许可声明。
这使得 MIT 许可证非常适合那些希望最大程度地开放代码，同时又不想对使用者施加过多限制的开发者。


类型：超宽松（Permissive）

核心要求：
- 只需保留原作者的版权声明和许可声明，即可自由使用、修改、分发、闭源、商用。

特点：
- 最简单、限制最少的协议，无专利授权明示，无商标授权。
- 与各种协议兼容性极佳。

典型项目：Node.js、jQuery、React（早期采用MIT）。


## Apache 2.0

Apache 2.0 License 许可证是一种宽松的开源协议，允许用户自由使用、修改和分发软件，
同时提供了明确的专利授权和商标使用条款。与 MIT 许可证相比，Apache 2.0 还要求用户在修改代码时提供变更说明，
并且在分发衍生作品时保留原始版权声明和许可声明。这使得 Apache 2.0 非常适合那些希望在开放代码的同时保护自己专利权利的开发者。

类型：宽松（Permissive），但比 MIT 更严谨

核心要求：
- 保留版权声明和免责声明，修改文件需标明变更。
- 提供明确的专利授权：贡献者自动授予使用者针对其贡献的专利许可。
- 如果原项目包含 NOTICE 文件，分发时必须保留该文件内容。

特点：
- 比 MIT 更完善的法律条款，尤其适合涉及专利的企业项目。
- 兼容 GPLv3（但 GPLv2 不兼容 Apache 2.0）。

典型项目：Hadoop、Spring Framework、Kubernetes（部分）、Android（部分）。


## GPL

GPL 全称是 GNU General Public License（GNU 通用公共许可证），是由自由软件基金会（Free Software Foundation）
发布的一种开源许可证。GPL 具有强制性的传染性（Copyleft），要求任何使用 GPL 代码的项目必须同样采用 GPL 许可证发布。
这意味着如果你将 GPL 代码集成到你的项目中，那么你的项目也必须开源，并且使用 GPL 许可证。
这种特性使得 GPL 非常适合那些希望确保其代码及其衍生作品始终保持开源的开发者。


类型：强 Copyleft（传染性）

核心要求：
- 任何发布或分发基于 GPL 代码的衍生作品，必须以 GPL 协议完整公开源代码。
- 即使是通过网络提供服务（如 SaaS），GPLv3 及部分解释下仍可能要求提供源代码（但 GPLv2 对网络使用不强制）。


特点：
- 保证软件永远自由，防止被私有化。
- 如果仅内部使用而不分发，可不公开源码。
- GPLv3 增加了针对专利反制、禁止 TiVo 化等条款。

典型项目：Linux 内核（GPLv2）、GCC、WordPress（GPLv2+）。


## LGPL

LGPL 全称是 GNU Lesser General Public License（GNU 较宽松公共许可证），是 GPL 的一个变体，
旨在允许开发者在不强制要求整个项目开源的情况下使用 GPL 代码。LGPL 主要用于库（Library）或框架（Framework），
允许开发者将 LGPL 代码作为独立模块集成到他们的项目中，而不需要将整个项目都开源。
这使得 LGPL 非常适合那些希望利用开源库但又不想完全开放自己代码的开发者。


类型：弱 Copyleft

核心要求：
- 允许将 LGPL 库以动态链接方式用于闭源程序，此时闭源部分无需公开源码。
- 若对 LGPL 库本身进行修改并分发，则修改部分仍需以 LGPL 公开。
- 静态链接可能被视为衍生作品，某些解释下要求整个应用以 GPL/LGPL 发布（具体依赖实现方式）。

特点：
-专为函数库设计，在保护库的自由的同时允许商业软件使用。

典型项目：FFmpeg（部分LGPL）、glibc、Qt（部分模块早期使用LGPL）。


# 核心差异对比表

| 维度              | GPL (v3)               | LGPL                             | MIT              | Apache 2.0             |
| :--------------- | :--------------------- | :------------------------------- | :--------------- | :--------------------- |
| **传染性**        | 强：衍生作品必须开源      | 弱：仅库本身传染，动态链接可闭源       | 无传染性          | 无传染性                 |
| **专利授权**      | 有（v3）                | 同 GPLv3                          | 无               | 有，明确且完整            |
| **商业友好度**    | 低                      | 中                                | 极高             | 高                      |
| **要求保留版权**  | 是                      | 是                                | 是（简短声明）     | 是（含 NOTICE）          |
| **允许闭源发布**  | 否                      | 部分允许（动态链接）                 | 是               | 是                      |
| **兼容 GPLv2**   | -                      | 兼容                               | 兼容             | **不兼容**（v2）         |
| **兼容 GPLv3**   | -                      | 兼容                               | 兼容             | **兼容**                |
| **典型适用场景**  | 必须保持完全开源的项目     | 开源库允许商业闭源调用                | 小型工具、前端库   | 企业级框架、基金会项目     |

**兼容性说明**：

- GPLv3 代码可以包含 Apache 2.0 代码，反之则不行。
- MIT 代码可与任何协议组合。
- 将 MIT 代码并入 GPL 项目是允许的，但反过来 GPL 代码不能并入 MIT 项目（因 MIT 无 Copyleft 要求，但 MIT 自身约束很少）。


# 注意事项

## 1. 根据项目目标选择协议

- **希望强制衍生作品开源** → GPL（如不希望被云服务商规避，应选 GPLv3）。
- **开发开源库，但不排斥商业闭源调用** → LGPL 或宽松协议（MIT/Apache）。
- **希望代码被最大范围采用** → MIT（最无约束）。
- **公司项目，有专利风险顾虑** → Apache 2.0（专利保护双向受益）。
- **纯个人学习分享，不关心商用** → 任何协议均可，但推荐至少选一个。

## 2. 严格遵守协议文本

- **所有协议都要求保留原始版权声明**。删除版权信息是违约行为。
- **Apache 2.0 特别要求保留 NOTICE 文件**，若原项目提供。
- **LGPL 动态链接**：必须允许用户修改 LGPL 库并重新链接（通常提供目标文件或使用共享库）。
- **GPL 项目**：若发布二进制，必须同时提供完整对应的源代码（或书面承诺提供）。

## 3. 注意许可证兼容性

- 将不同协议的代码组合成一个作品时，必须满足**所有协议**中较严格的一方。
  - 例：GPL 项目只能使用 GPL、LGPL、MIT、BSD 等兼容协议代码，但不能使用 Apache 2.0（若项目本身是 GPLv2）。
  - GPLv3 项目可包含 Apache 2.0 代码。
- 尽量避免协议冲突，否则无法合法分发。

## 4. 明确协议版本和扩展

- GPL 有 “GPLv2 only” 和 “GPLv2 or later” 等措辞，影响未来兼容性。
- 若不确定，建议采用 “GPLv3 or later” 或明确固定版本。

## 5. 专利与商标问题

- **MIT 和 BSD 类协议无专利授权**，若贡献者拥有相关专利，使用者仍可能被起诉。Apache 2.0 和 GPLv3 则明确授予专利许可。
- **商标权**：所有协议均不授予商标使用权，不可利用项目名称误导来源。

## 6. 云服务（SaaS）的特殊性

- **GPLv2**：仅通过分发触发 Copyleft，若只通过云服务运行而不分发软件，不强制公开源码。
- **GPLv3** 和 **AGPL**（更强版）明确要求网络服务也需提供源码。若担心云服务商“白嫖”，可考虑 AGPL。

## 7. 区分“程序”与“库”/“聚合体”

- 静态链接 LGPL 库时，通常视为衍生作品，可能被迫开源整个应用。**稳妥做法是始终采用动态链接**。
- 若仅是命令行管道调用，不视为修改 LGPL 库，无需遵守 Copyleft。
