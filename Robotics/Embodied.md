<!--
 * @Author: JohnJeep
 * @Date: 2025-12-28 11:06:27
 * @LastEditors: JohnJeep
 * @LastEditTime: 2026-01-31 17:13:35
 * @Description: Embodied Intelligence
 * Copyright (c) 2025 by John Jeep, All Rights Reserved. 
-->

- [1. Embodied Intelligence(具身智能)](#1-embodied-intelligence具身智能)
- [2. Terms](#2-terms)
- [3. 线性代数在机器人领域的应用](#3-线性代数在机器人领域的应用)
- [4. 机器人学习](#4-机器人学习)
  - [4.1. 理论基础](#41-理论基础)
  - [4.2. 人形机器人技术](#42-人形机器人技术)
  - [4.3. 核心环节](#43-核心环节)
  - [4.4. 仿真工具](#44-仿真工具)
- [5. Robotic System(机器人系统)](#5-robotic-system机器人系统)
  - [5.1. 大小脑一体化](#51-大小脑一体化)
  - [5.2. 系统组成](#52-系统组成)
- [6. 结构设计](#6-结构设计)
- [7. 关节模组](#7-关节模组)
- [8. Kinematics(运动学)](#8-kinematics运动学)
  - [先决条件](#先决条件)
    - [任务空间(task space)](#任务空间task-space)
    - [8.1.1. 坐标系](#811-坐标系)
    - [8.1.2. 末端执行器(end effector)](#812-末端执行器end-effector)
    - [8.1.3. 笛卡尔空间](#813-笛卡尔空间)
    - [8.1.4. 雅可比矩阵(Jacobian Matrix)](#814-雅可比矩阵jacobian-matrix)
    - [8.1.5. 位姿](#815-位姿)
  - [8.1. Forward Kinematics(正向运动学)](#81-forward-kinematics正向运动学)
  - [8.2. Inverse Kinematics(逆向运动学)](#82-inverse-kinematics逆向运动学)
- [9. Dynamics(动力学)](#9-dynamics动力学)
  - [9.1. Forward Dynamics(正向动力学)](#91-forward-dynamics正向动力学)
  - [9.2. 反馈控制](#92-反馈控制)
- [10. Control Synthesis(控制综合)](#10-control-synthesis控制综合)
- [11. ZPM](#11-zpm)
- [12. 视觉感知](#12-视觉感知)
  - [12.1. 里程计](#121-里程计)
  - [12.2. 惯性传感器](#122-惯性传感器)

# 1. Embodied Intelligence(具身智能)

机器人学主要依赖于数学、物理、机械工程、电子工程、计算机科学，还涉及哲学、心理学、生物学等领域。

机器人的核心是运动---受控制的编程运动。

机器人学研究的是怎样综合运用机械装置、传感器、启动器和计算机来实现人类某些方面的功能。


# 2. Terms

列出机器人学中的一些常用术语及其对应的英文表达。
- 自由度：degree of freedom
- 连杆：link
- 关节：joint
- 末端执行器：end effector
- 工作空间：workspace
- 任务空间：task space
- 位姿：pose
- 齐次变换矩阵：homogeneous transformation matrix
- 雅可比矩阵：Jacobian matrix
- 动力学：dynamics
- 正向动力学：forward dynamics
- 逆向动力学：inverse dynamics
- 控制综合：control synthesis
- 零力矩点：Zero Moment Point (ZMP)


# 3. 线性代数在机器人领域的应用

下面的表格总结了线性代数在机器人中的角色。

| 应用领域      | 核心线性代数概念       | 作用                               |
| :------------ | :--------------------- | :--------------------------------- |
| **运动学**    | 齐次变换矩阵、旋转矩阵 | 计算机械臂末端位置、机器人位姿变化 |
| **动力学**    | 质量矩阵、向量运算     | 计算力、力矩、加速度，实现精准控制 |
| **视觉/感知** | 像素矩阵、特征值分解   | 图像识别、三维空间重建、避障       |
| **状态估计**  | 协方差矩阵、矩阵求逆   | 融合传感器数据，消除噪声，准确定位 |



# 4. 机器人学习

## 4.1. 理论基础

- 运动学、动力学建模
- 动力学
- 状态估计
- 约束控制


## 4.2. 人形机器人技术

**感知 —决策—执行—协同。**

**所需技术：**

1. 计算机视觉
2. 深度学习
3. 自主导航、SLAM导航
4. **运动规划和控制**
5. 伺服驱动器
6. 决策定制
7. 自然语言处理
8. 人机交互、语音交互
9. 柔性关节
10. 灵巧手
11. 双足


## 4.3. 核心环节

1. 机构层
2. 关节层
3. 运动层
4. 感知层
5. 认知层
6. 决策层


## 4.4. 仿真工具

1. Gazebo
2. MuJoCo
3. Isaac Sim
4. PyBullet



# 5. Robotic System(机器人系统)

系统工程能力：数据--->模型--->仿真--->部署。



## 5.1. 大小脑一体化

运动控制（motion control）是由控制器、驱动器、电机和传感器组成的整套硬件和软件系统，用来协调机器人的关节运动。

- **大脑（大脑皮层）：** 负责思考、决策、感知环境（如识别物体、规划路径）。
- **小脑（运控系统）：** 负责协调肢体、保持平衡、执行精细动作（如走路不摔倒、抓取物体）。

> 传统的做法，是让大脑和小脑各干各的。大脑想好了，输出一条指令；小脑接到指令，执行动作。是【先想后做】---我想好了所有步骤，然后一步步执行。
> 新的方式：【边做变想】---我一边执行，一边根据反馈调整计划。


把机器人大小脑融合起来，一起协同工作。**上层的决策可以直接影响底层的动作，底层的感知可以即时反馈给上层，中间的技能层负责把两边对齐。**让大脑真正「感知」到身体在做什么、环境发生了什么变化；也让身体知道大脑想要什么，并且能够灵活调整去实现它。实现理解任务、感知环境、调整决策、组合技能、物理执行的完整闭环。

1. 具备自主感知、理解、决策、行动的能力。让机器人能够同时想、同时动、边思考边干活儿。
2. 指令的决策：把新指令纳入规划，与人交互后，通过调整优先级去实现。
3. 机器人的决策不是一次性的规划，而是与环境持续的交互、反馈和响应的过程。


**预设的动作库：**走路、抬手、挥手、转身、踏步。

逐际动力COSA: https://mp.weixin.qq.com/s/MaEuB5jj3A4qf40eTHy_Iw



## 5.2. 系统组成

- 主控
- 驱动
- 传感器
- 执行器
- 结构设计
- 通信
  - EtherCAT
  - CAN
  - ROS2 DDS
  - Modbus



# 6. 结构设计

机器人结构设计包括机械结构设计和电子电路设计两大部分。

机械结构设计主要涉及机器人的外形设计、关节布局、连杆长度等方面，以确保机器人具备良好的运动性能和稳定性。电子电路设计则包括传感器布置、电机驱动电路、控制系统等，以实现对机器人的精确控制和反馈。


# 7. 关节模组

机器人关节模组是机器人系统中的关键组成部分，负责实现机器人的运动和姿态调整。

机器人的关节由驱动器驱动。



构成关节模块的主要部件有：
- 电机
- 减速器：主要目的是提高电机的输出力矩，提高电机的位置控制精度。
- 编码器：为电机的位置、速度等基本信息提供反馈。
- 抱闸：实现断电自锁。
- 驱动器

机器人一般有多个关节且需要高频率的控制，所以通信协议一般用 CAN 总线或者 EtherCAT 总线来进行通信控制。

- CAN 总线的最高波特率为 1Mbps
- EherCAT 总线  波特率最高可以达到 100M bps  


# 8. Kinematics(运动学)

运动学研究机器人的几何结构和运动特性，而不考虑引起这种运动的力。主要研究如何描述和计算机器人各个连杆的位置、姿态、速度和加速度。


## 先决条件

### 任务空间(task space)

任务空间是指机器人末端执行器在三维空间中可以达到的位置和姿态的集合。任务空间通常使用笛卡尔坐标系来描述，包括位置（X、Y、Z坐标）和姿态（滚转(roll)、俯仰(pitch)、偏航角度(yaw)）。任务空间反映了机器人在执行特定任务时所需的操作范围和能力。


机器人位形空间(configuration space)与任务空间(task space)之间并非——映射的关系。机器人的工作空间（workspace）则可以定义为末端执行器所能达到的任务空间的子集。


### 8.1.1. 坐标系

1. 世界坐标系(world coordinate frame)： 通常指机器人所在环境的全局坐标系，一般是固定不变的参考系，用于描述机器人及其操作对象在空间中的位置和姿态。
  > 设定世界坐标系，以初始状态的人形机器人正下方的点为原点，它前方为 x 轴，左方为 y 轴，垂直向上为 z 轴，构成右手坐标系。
2. 绝对坐标系(absolute coordinate system)：通常指机器人系统中某个固定的参考坐标系，一般用于描述机器人在环境中的位置和姿态。
3. 相对坐标系(relative coordinate system)：通常指相对于某个参考坐标系的坐标系，用于描述机器人各部分之间的位置关系。
4. 基坐标系(base coordinate frame)：通常指机器人底座所在的坐标系，是整个机器人系统的参考坐标系。
5. 工具坐标系(tool coordinate frame)：通常指安装在机器人末端执行器上的局部坐标系，用于描述末端执行器相对于自身的位姿。
6. 基坐标(base link)：移动机器人的中心点。
7. 雷达坐标(laser link)：雷达所在的位置。
8. 里程坐标系(odom)：机器人要移动，里程计会累积位置，这个位置的参考系叫做**里程计坐标系**odom。
9.  地图坐标(map)：里程计数有累积误差和漂移，绝对位置的参考系叫做地图坐标系。



### 8.1.2. 末端执行器(end effector)

末端执行器是机器人系统中与环境直接交互的部分，通常安装在机器人机械臂的末端。它可以是各种类型的工具或装置，如机械手、夹具、焊接工具、喷涂设备等。末端执行器的设计和功能取决于机器人的应用需求，旨在完成特定的任务，如抓取、操作、加工等。


### 8.1.3. 笛卡尔空间

笛卡尔空间是指使用笛卡尔坐标系来描述物体位置和运动的空间。在机器人学中，笛卡尔空间通常用于表示机器人末端执行器的位置和姿态。笛卡尔坐标系由三个互相垂直的轴（通常称为X、Y、Z轴）组成，用于描述三维空间中的点。

### 8.1.4. 雅可比矩阵(Jacobian Matrix)

雅可比矩阵是描述机器人关节速度与末端执行器线速度和角速度之间关系的矩阵。它在机器人运动学中起着关键作用，用于将关节空间的速度映射到任务空间的速度。雅可比矩阵的每一列对应一个关节变量对末端执行器位置和姿态的影响。


### 8.1.5. 位姿

位姿(position and orientation) 是描述物体在空间中位置和姿态的组合。

位置通常用三维坐标（X、Y、Z）表示，而姿态则描述物体相对于参考坐标系的方向，通常使用欧拉角、四元数或旋转矩阵来表示。

姿态的三种常用表示方法：
1. X-Y-Z 固定角
2. Z-Y-X 欧拉角
3. Z-Y-Z 欧拉角


## 8.1. Forward Kinematics(正向运动学)

如何根据机器人的关节角度，描述每个连杆的位置和姿态，被称为正向运动学。

正运动学研究物体的运动，而不考虑引起这种运动的力。正运动学是一个计算末端执行器位置和姿态的静态几何问题，基于已知的关节参数（如关节角度或位移），通过一系列的几何变换来确定末端执行器在空间中的位置和方向。

具体来讲，给定一组关节变量（如关节角度或位移），正向运动学通过以下步骤计算末端执行器的位置和姿态：
1. **定义坐标系**：为每个连杆和关节定义局部坐标系，通常使用Denavit-Hartenberg（D-H）参数法来系统地描述这些坐标系之间的关系。
2. **建立变换矩阵**：使用齐次变换矩阵来表示
3. 连杆之间的几何关系。这些矩阵包括旋转和平移信息。
4. **连乘变换矩阵**：通过将各个连杆的变换矩阵相乘，得到从基坐标系到末端执行器坐标系的总变换矩阵。
5. **提取位置和姿态**：从总变换矩阵中提取末端执行器的位置信息（通常是矩阵的前三列）和姿态信息（通常是旋转矩阵或欧拉角）。


正向运动学中研究的内容
- 位置
- 速度
- 加速度
- 位置变量对于时间或者其他变量的高阶微分。


## 8.2. Inverse Kinematics(逆向运动学)

逆运动学研究的是机器人为什么要这么运动？涉及力。即根据每个连杆的位置和姿态，计算所有可到达的机器人关节角度。


正运动学方程是各个关节变量的函数，描述了工具坐标系相对于基坐标系的位置和姿态。 给定工具坐标系的位置和姿态，通过逆运动学方程可以计算出各个关节变量的值。



# 9. Dynamics(动力学)

动力学是研究物体运动及其原因的科学，主要关注力和力矩如何影响物体的运动状态。在机器人学中，动力学涉及分析机器人在外部力作用下的运动行为，包括加速度、速度和位置的变化。

操作臂的结构设计有关
1. 设计多少关节是适宜的？
2. 关节的类型是什么？
3. 关节如何布局？



## 9.1. Forward Dynamics(正向动力学)

正向动力学研究的是给定机器人各个关节的力和力矩，计算机器人各个连杆的加速度、速度和位置变化。

正向动力学方程描述了机器人各个连杆的加速度、速度和位置变化，作为各个关节力和力矩的函数。给定各个关节的力和力矩，通过正向动力学方程可以计算出机器人各个连杆的运动状态。



## 9.2. 反馈控制

人形机器人的步态模式要能防止机器人自身在没有干扰的情况下翻到，一般是通过反馈控制来稳定的。

线性倒立摆模型
- 一维
- 二维
- 三维



生成大致的全身运动模式的方法

1. 动作捕捉
2. GUI
3. 快速高阶空间搜索

> 稳定的执行这些动作。

消除因 GUI和快速高阶空间搜索制作的动作，没有考虑到动力学的特性，而采取的措施：

1. 动态滤波器
2. 自动平衡器



# 10. Control Synthesis(控制综合)

机器人控制器的工作就是将任务指令转换成驱动关节的力和力矩。



# 11. ZPM

Zero Moment Point（零力矩点）：指机器人脚底从地面承受的力矩为 0 的点，总是在地面和脚底接触面的某个地方。



# 12. 视觉感知

视觉感知是机器人通过摄像头等视觉传感器获取环境信息，并进行处理和理解的过程。视觉感知在机器人导航、物体识别、环境建模等方面起着关键作用。


## 12.1. 里程计

里程计（odometry）是通过测量机器人轮子的转动来估计机器人位置和姿态变化的一种方法。它通常使用轮速传感器来获取轮子的转速信息，并结合机器人的运动模型来推算出机器人的位移和旋转。

里程计的优点是实现简单、成本低廉，但其精度会受到轮子打滑、地面不平等因素的影响，容易产生累积误差。因此，里程计常常与其他传感器（如IMU、激光雷达等）结合使用，以提高定位精度和鲁棒性。

里程计组成部分
- 车轮编码器（Wheel Encoder）
- 运动模型（Motion Model）
- 传感器融合（Sensor Fusion）
- 运动估计和滤波算法（Motion Estimation and Filtering Algorithms）


## 12.2. 惯性传感器

惯性传感器（Inertial Measurement Unit, IMU）是一种用于测量物体加速度和角速度的传感器，通常由加速度计和陀螺仪组成。IMU 可以提供物体在三维空间中的运动信息，广泛应用于机器人、无人机、汽车导航等领域。

- 加速度计：用于测量物体在各个轴向的线性加速度，通常采用微机电系统（MEMS）技术制造。加速度计可以检测物体的加速和减速，从而推算出物体的位置变化。
- 陀螺仪：用于测量物体的角速度和旋转速度，从而推算出物体的姿态变化，通常也采用 MEMS 技术制造。
